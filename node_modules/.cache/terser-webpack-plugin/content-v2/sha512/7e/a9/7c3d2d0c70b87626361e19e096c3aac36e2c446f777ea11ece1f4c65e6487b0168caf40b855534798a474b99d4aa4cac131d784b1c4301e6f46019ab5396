{"code":"!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){var r=n(1);function o(e){if(!(this instanceof o))throw new Error('[BTFS-mini] BTFS instance must be instantiated with \"new\" flag (e.g. var BTFS = new BTFS(\"http://localhost:8545\");).');this.setProvider(e||{})}function i(){}function a(e){return new Promise(e)}function s(e){e(i,i)}e.exports=o,o.prototype.setProvider=function(e){if(\"object\"!=typeof e)throw new Error(`[ifpsjs] provider must be type Object, got '${typeof e}'.`);var t=this.provider=Object.assign({host:\"127.0.0.1\",pinning:!0,port:\"5001\",protocol:\"http\",base:\"/api/v1\"},e||{});this.requestBase=String(`${t.protocol}://${t.host}:${t.port}${t.base}`)},o.prototype.sendAsync=function(e,t){var n=this,o=new r,u=e||{};return(t?s:a)((function(r,a){function s(e,n){return(t||i)(e,u.takeHash?n.Hash:n),e?a(e):!e&&n?r(u.takeHash?n.Hash:n):void 0}o.onreadystatechange=function(){if(4===o.readyState&&1!==o.timeout)if(200!==o.status)s(new Error(`[BTFS-mini] status ${o.status}: ${o.responseText}`),null);else try{s(null,u.jsonParse?JSON.parse(o.responseText):o.responseText)}catch(e){s(new Error(`[BTFS-mini] while parsing data: '${String(o.responseText)}', error: ${String(e)} with provider: '${n.requestBase}'`,null))}};try{var p=n.provider.pinning&&\"/add\"===e.uri?\"?pin=true\":\"\";u.payload?o.open(\"POST\",`${n.requestBase}${e.uri}${p}`):o.open(\"GET\",`${n.requestBase}${e.uri}${p}`),u.accept&&o.setRequestHeader(\"accept\",u.accept),u.payload&&u.boundary?(o.setRequestHeader(\"Content-Type\",`multipart/form-data; boundary=${u.boundary}`),o.send(u.payload)):o.send()}catch(e){s(e,null)}}))},o.prototype.add=function(e,t){var n=\"object\"==typeof e&&e.isBuffer?e.toString(\"binary\"):e,r=function(e){for(;;){var t=`----BTFSMini${1e5*Math.random()}.${1e5*Math.random()}`;if(-1===e.indexOf(t))return t}}(n),o=`--${r}\\r\\nContent-Disposition: form-data; name=\"path\"\\r\\nContent-Type: application/octet-stream\\r\\n\\r\\n${n}\\r\\n--${r}--`;return console.log(o),this.sendAsync({jsonParse:!0,accept:\"application/json\",uri:\"/add\",takeHash:!0,payload:o,boundary:r},t)}},function(e,t){const n=window.XMLHttpRequest;e.exports=n}])}));","extractedComments":[]}